# Cognis 用户界面设计规范

## 1. 设计系统

### 1.1 色彩系统

#### 主色调（Primary Colors）
- **品牌主色**: `#3B82F6` (蓝色)
  - 用于：主要按钮、链接、选中状态
  - 深色模式: `#60A5FA`
- **品牌辅色**: `#8B5CF6` (紫色)
  - 用于：AI相关功能标识、高亮
  - 深色模式: `#A78BFA`

#### 语义色（Semantic Colors）
- **成功色**: `#10B981` (绿色)
  - 用于：连接成功、操作完成
  - 深色模式: `#34D399`
- **警告色**: `#F59E0B` (橙色)
  - 用于：重要提示、警告信息
  - 深色模式: `#FBBF24`
- **错误色**: `#EF4444` (红色)
  - 用于：错误状态、危险操作
  - 深色模式: `#F87171`
- **信息色**: `#3B82F6` (蓝色)
  - 用于：提示信息、帮助文本
  - 深色模式: `#60A5FA`

#### 中性色（Neutral Colors）
- **文本主色**: `#1F2937` (深灰)
  - 深色模式: `#F9FAFB`
- **文本次色**: `#6B7280` (中灰)
  - 深色模式: `#D1D5DB`
- **文本禁用**: `#9CA3AF` (浅灰)
  - 深色模式: `#6B7280`
- **背景主色**: `#FFFFFF` (白色)
  - 深色模式: `#111827`
- **背景次色**: `#F9FAFB` (浅灰)
  - 深色模式: `#1F2937`
- **分割线**: `#E5E7EB` (极浅灰)
  - 深色模式: `#374151`

#### 终端专用色
- **终端背景**: `#1E1E1E` (VS Code Dark)
  - 可配置：支持自定义背景色
- **终端文本**: `#D4D4D4` (浅灰)
  - 可配置：支持自定义文本色
- **终端光标**: `#AEAFAD` (中灰)
  - 闪烁动画：1秒周期
- **ANSI颜色**: 使用标准16色ANSI调色板
  - 支持256色和True Color

### 1.2 字体系统

#### 字体家族
- **界面字体**: SF Pro（macOS系统字体）
  - 优点：系统原生、优化渲染、支持中英文
- **终端字体**: SF Mono / Menlo
  - 等宽字体，适合代码和终端显示
  - 备选：Fira Code、JetBrains Mono（支持连字）
- **代码字体**: SF Mono
  - 用于代码片段、命令显示

#### 字体大小
- **H1标题**: 24pt / Bold
- **H2标题**: 20pt / Semibold
- **H3标题**: 17pt / Semibold
- **正文**: 13pt / Regular
- **小字**: 11pt / Regular
- **微字**: 10pt / Regular
- **终端**: 12pt-14pt / Regular（可配置）

#### 字重（Font Weight）
- **Bold**: 700 - 用于强调、标题
- **Semibold**: 600 - 用于次级标题
- **Medium**: 500 - 用于按钮文字
- **Regular**: 400 - 用于正文
- **Light**: 300 - 用于辅助文字（少用）

### 1.3 图标系统

#### 图标库
- **SF Symbols**: macOS系统图标库
  - 优点：系统原生、自动适配尺寸、支持多色
  - 版本要求：SF Symbols 5+

#### 常用图标
- **会话管理**:
  - SSH: `network`
  - 串口: `cable.connector`
  - 新建: `plus.circle`
  - 删除: `trash`
  - 设置: `gearshape`
- **终端操作**:
  - 复制: `doc.on.doc`
  - 粘贴: `doc.on.clipboard`
  - 清屏: `clear`
  - 分屏: `rectangle.split.3x1`
- **AI功能**:
  - AI建议: `sparkles`
  - 执行: `play.circle`
  - 停止: `stop.circle`
  - 分析: `chart.bar`
- **连接状态**:
  - 已连接: `circle.fill` (绿色)
  - 连接中: `circle.dotted` (黄色动画)
  - 已断开: `circle` (灰色)
  - 错误: `exclamationmark.circle.fill` (红色)

#### 图标尺寸
- **小图标**: 16x16pt (列表项、按钮)
- **中图标**: 20x20pt (工具栏)
- **大图标**: 24x24pt (主要操作)
- **特大图标**: 32x32pt (空状态、占位符)

### 1.4 间距系统

#### 间距规范
- **4pt网格**: 所有间距为4的倍数
- **基础单位**:
  - `xs`: 4pt
  - `sm`: 8pt
  - `md`: 12pt
  - `lg`: 16pt
  - `xl`: 24pt
  - `2xl`: 32pt
  - `3xl`: 48pt

#### 应用场景
- **组件内边距**: 8pt-12pt
- **组件外边距**: 12pt-16pt
- **分组间距**: 24pt
- **页面边距**: 16pt-20pt

### 1.5 圆角系统
- **小圆角**: 4pt (按钮、输入框)
- **中圆角**: 8pt (卡片、面板)
- **大圆角**: 12pt (对话框、浮窗)
- **全圆角**: 50% (头像、状态指示器)

### 1.6 阴影系统
- **小阴影**: `0 1px 2px rgba(0,0,0,0.05)`
  - 用于：按钮hover状态
- **中阴影**: `0 4px 6px rgba(0,0,0,0.07)`
  - 用于：卡片、下拉菜单
- **大阴影**: `0 10px 15px rgba(0,0,0,0.1)`
  - 用于：模态对话框、浮动面板
- **特大阴影**: `0 20px 25px rgba(0,0,0,0.15)`
  - 用于：重要提示、拖拽状态

## 2. 布局规范

### 2.1 三栏布局详细尺寸

#### Sidebar（侧边栏）
- **默认宽度**: 240pt
- **最小宽度**: 200pt
- **最大宽度**: 320pt
- **可调整**: 支持拖拽调整宽度
- **折叠状态**: 可完全折叠，显示图标栏（48pt宽）

#### Main Canvas（主画布）
- **最小宽度**: 400pt
- **默认占比**: 自适应剩余空间
- **支持分屏**: 水平/垂直分割
- **标签栏高度**: 32pt

#### AI Inspector（AI检查器）
- **默认宽度**: 280pt
- **最小宽度**: 240pt
- **最大宽度**: 400pt
- **可调整**: 支持拖拽调整宽度
- **可隐藏**: 支持完全隐藏
- **浮动模式**: 可脱离主窗口浮动（未来）

### 2.2 响应式设计规则

#### 窗口大小断点
- **最小窗口**: 800x600pt
- **推荐窗口**: 1280x800pt
- **大屏优化**: 1920x1080pt+

#### 自适应规则
- **窗口 < 1000pt宽**: AI Inspector自动隐藏
- **窗口 < 800pt宽**: Sidebar自动折叠为图标栏
- **窗口 < 600pt高**: 标签栏合并为下拉菜单

### 2.3 窗口大小限制
- **最小宽度**: 800pt
- **最小高度**: 600pt
- **默认尺寸**: 1200x800pt
- **全屏支持**: 支持macOS原生全屏

## 3. 组件规范

### 3.1 终端组件

#### 终端样式
- **背景色**: 深色主题（默认`#1E1E1E`）
- **文本色**: 浅色（默认`#D4D4D4`）
- **字体**: SF Mono 12pt
- **行高**: 1.4倍字体大小
- **字符间距**: 0pt（等宽字体）
- **边距**: 上下左右各8pt

#### 滚动条设计
- **宽度**: 8pt（隐藏模式）
- **颜色**: 半透明灰色`rgba(255,255,255,0.2)`
- **自动隐藏**: 无操作2秒后隐藏
- **平滑滚动**: 使用动画缓动

#### 光标设计
- **样式**: 实心矩形（可配置：下划线、竖线）
- **颜色**: `#AEAFAD`
- **闪烁**: 1秒周期（0.5秒显示，0.5秒隐藏）
- **焦点状态**: 获得焦点时闪烁，失去焦点时静止显示

#### 标签页设计
- **标签高度**: 32pt
- **标签最小宽度**: 120pt
- **标签最大宽度**: 200pt
- **标签间距**: 无间距，紧密排列
- **关闭按钮**: Hover时显示，16x16pt
- **新建按钮**: 标签栏右侧，+ 图标
- **拖拽支持**: 支持拖拽重排序

#### 选中标签样式
- **背景色**: 终端背景色
- **文本色**: 主文本色
- **边框**: 顶部2pt蓝色边框

#### 未选中标签样式
- **背景色**: 次要背景色
- **文本色**: 次要文本色
- **Hover效果**: 背景色加深10%

### 3.2 AI侧边栏

#### 面板状态

##### 展开状态
- **宽度**: 280pt
- **内边距**: 16pt
- **背景**: 次要背景色
- **分割线**: 左侧1pt分割线

##### 折叠状态
- **宽度**: 0pt
- **动画**: 0.2秒缓动动画
- **快捷键**: `Cmd+Shift+A`

#### 建议卡片设计
- **卡片背景**: 主背景色
- **卡片圆角**: 8pt
- **卡片间距**: 12pt
- **卡片内边距**: 12pt
- **阴影**: 小阴影

#### 建议卡片内容
- **标题**: 13pt / Semibold
- **描述**: 11pt / Regular / 次要文本色
- **命令**: 11pt / Mono / 代码背景
- **优先级标签**:
  - Critical: 红色背景、白色文字
  - High: 橙色背景、白色文字
  - Medium: 蓝色背景、白色文字
  - Low: 灰色背景、深色文字

#### 执行按钮设计
- **位置**: 卡片底部右侧
- **样式**: 主色按钮
- **尺寸**: 高度28pt，圆角4pt
- **图标**: `play.circle` + 文字"执行"
- **Hover效果**: 背景加深10%
- **点击效果**: 缩放动画（0.95倍）

### 3.3 会话管理

#### 侧边栏分组设计
- **分组标题**: 11pt / Semibold / 大写
- **分组间距**: 24pt
- **分组可折叠**: 点击标题折叠/展开
- **默认分组**: "SSH Sessions", "Serial Sessions"

#### 会话列表项设计
- **高度**: 32pt
- **内边距**: 左8pt，右8pt
- **圆角**: 4pt
- **图标位置**: 左侧，16x16pt
- **文本**: 13pt / Regular
- **状态指示器**: 右侧，8x8pt圆点

#### 选中列表项样式
- **背景色**: 主色（10%透明度）
- **文本色**: 主色
- **边框**: 左侧2pt主色边框

#### 未选中列表项样式
- **背景色**: 透明
- **文本色**: 主文本色
- **Hover效果**: 次要背景色

#### 连接状态指示器
- **已连接**: 绿色圆点
- **连接中**: 黄色圆点（脉冲动画）
- **已断开**: 灰色圆点
- **错误**: 红色圆点（带感叹号）

#### 右键菜单
- **触发**: 右键点击列表项
- **菜单项**:
  - 重命名
  - 复制会话
  - 断开连接
  - 删除会话
  - 分隔线
  - 编辑配置
- **菜单样式**: macOS原生样式

## 4. 交互设计

### 4.1 键盘快捷键规范

#### 全局快捷键
- `Cmd+N`: 新建SSH会话
- `Cmd+Shift+N`: 新建串口会话
- `Cmd+W`: 关闭当前标签
- `Cmd+Shift+W`: 关闭当前会话
- `Cmd+Q`: 退出应用
- `Cmd+,`: 打开设置

#### 标签管理
- `Cmd+T`: 新建标签
- `Cmd+数字`: 切换到第N个标签（1-9）
- `Cmd+[`: 切换到上一个标签
- `Cmd+]`: 切换到下一个标签
- `Cmd+Shift+[`: 移动标签到左侧
- `Cmd+Shift+]`: 移动标签到右侧

#### 终端操作
- `Cmd+C`: 复制选中文本（终端中使用Ctrl+C发送中断）
- `Cmd+V`: 粘贴
- `Cmd+K`: 清屏
- `Cmd+F`: 查找
- `Cmd++`: 增大字体
- `Cmd+-`: 减小字体
- `Cmd+0`: 重置字体大小

#### AI功能
- `Cmd+Shift+A`: 显示/隐藏AI Inspector
- `Cmd+Shift+R`: 重新分析当前上下文
- `Enter`: 执行选中的AI建议（焦点在建议上时）

#### 分屏操作
- `Cmd+D`: 水平分屏
- `Cmd+Shift+D`: 垂直分屏
- `Cmd+Option+方向键`: 在分屏间切换焦点
- `Cmd+Shift+方向键`: 调整分屏大小

### 4.2 鼠标交互规范

#### 点击行为
- **单击**: 选中会话/标签
- **双击**:
  - 侧边栏：重命名会话
  - 终端：选中单词
- **三击**: 终端中选中整行
- **右键**: 显示上下文菜单

#### 拖拽操作
- **拖拽标签**: 重新排序
- **拖拽会话**:
  - 同组内：重新排序
  - 跨组：移动到其他分组
- **拖拽分割线**: 调整面板宽度
- **拖拽文件到终端**:
  - 本地文件：粘贴文件路径
  - SSH会话：上传文件（显示确认对话框）

#### Hover效果
- **按钮**: 背景加深、显示阴影
- **列表项**: 背景高亮
- **标签**: 背景加深、显示关闭按钮
- **超链接**: 下划线、颜色加深

### 4.3 拖放操作设计

#### 支持的拖放场景
1. **文件拖入终端**: 粘贴文件路径或上传文件
2. **文本拖入终端**: 粘贴文本内容
3. **标签拖拽重排**: 调整标签顺序
4. **会话拖拽分组**: 移动会话到不同分组
5. **窗口分离**: 拖拽标签创建新窗口（未来）

#### 拖放视觉反馈
- **拖拽源**: 半透明显示（50%）
- **放置目标**: 高亮边框（2pt主色）
- **禁止放置**: 禁止图标（⃠）
- **放置提示**: 插入位置指示线

### 4.4 动画和过渡效果

#### 动画原则
- **快速响应**: 短时动画（<0.2秒）用于即时反馈
- **自然过渡**: 中时动画（0.2-0.4秒）用于状态切换
- **引导注意**: 长时动画（>0.4秒）用于重要变化

#### 标准动画时长
- **微动画**: 0.1秒 - Hover效果、点击反馈
- **快速动画**: 0.2秒 - 面板展开/折叠、标签切换
- **标准动画**: 0.3秒 - 对话框打开/关闭、页面切换
- **慢速动画**: 0.4秒 - 复杂布局变化

#### 缓动函数
- **ease-out**: 默认缓动，用于大部分动画
- **ease-in-out**: 用于循环动画、往返动画
- **spring**: 用于弹性效果、拖拽反馈
- **linear**: 用于进度指示、旋转动画

#### 常用动画效果
- **淡入淡出**: 模态对话框、提示信息
- **滑动**: 面板展开/折叠、下拉菜单
- **缩放**: 按钮点击、卡片悬浮
- **旋转**: 加载指示器、刷新按钮
- **脉冲**: 连接状态指示器、新通知

## 5. 可访问性设计

### 5.1 VoiceOver支持
- 所有交互元素提供辅助标签
- 按钮和控件提供辅助提示
- 复杂组件提供辅助导航

### 5.2 键盘导航
- Tab键在所有可交互元素间导航
- 空格键激活按钮和开关
- 方向键在列表和菜单中导航
- Esc键关闭对话框和菜单

### 5.3 对比度要求
- 正常文本对比度 ≥ 4.5:1
- 大文本对比度 ≥ 3:1
- UI组件对比度 ≥ 3:1

### 5.4 字体缩放
- 支持系统字体大小设置
- 支持动态字体（Dynamic Type）
- 终端字体独立缩放（Cmd+/Cmd-）

## 6. 主题系统

### 6.1 内置主题
- **Light Mode**: 浅色主题
- **Dark Mode**: 深色主题
- **Auto**: 跟随系统设置

### 6.2 终端主题
- **VS Code Dark**: 默认深色主题
- **Solarized Dark**: 经典深色主题
- **Solarized Light**: 经典浅色主题
- **Monokai**: 流行深色主题
- **Custom**: 支持自定义颜色配置

### 6.3 主题切换
- 位置：设置 → 外观
- 实时预览：无需重启
- 独立配置：UI主题和终端主题独立

## 7. 空状态设计

### 7.1 无会话状态
- **图标**: 大图标`externaldrive.connected.to.line.below`
- **标题**: "还没有会话"
- **描述**: "点击"+"按钮创建新的SSH或串口会话"
- **操作**: "创建SSH会话" / "创建串口会话"按钮

### 7.2 无AI建议状态
- **图标**: `sparkles`
- **标题**: "一切正常"
- **描述**: "当终端出现错误时，AI会自动分析并提供建议"

### 7.3 搜索无结果
- **图标**: `magnifyingglass`
- **标题**: "未找到结果"
- **描述**: "尝试其他关键词"

## 8. 错误和通知设计

### 8.1 Toast通知
- **位置**: 窗口顶部中央，向下滑入
- **宽度**: 最大400pt
- **高度**: 自适应内容
- **显示时长**:
  - 成功：2秒
  - 警告：4秒
  - 错误：6秒或手动关闭
- **图标**: 根据类型显示对应图标
- **关闭按钮**: 右上角X按钮

### 8.2 对话框
- **模态遮罩**: 半透明黑色背景`rgba(0,0,0,0.4)`
- **对话框背景**: 主背景色 + 大阴影
- **对话框圆角**: 12pt
- **最小宽度**: 320pt
- **最大宽度**: 480pt
- **按钮布局**: 右对齐，主要按钮在右侧

### 8.3 错误提示
- **行内错误**: 输入框下方，红色文本
- **页面错误**: 页面中央，错误图标 + 消息 + 重试按钮
- **连接错误**: 状态栏显示，可点击查看详情

## 9. 性能优化UI指南

### 9.1 渲染优化
- 使用SwiftUI懒加载（LazyVStack, LazyHStack）
- 虚拟化长列表（List with lazy loading）
- 避免过度重绘（equatable, @ObservedObject优化）

### 9.2 动画优化
- 使用GPU加速动画（transform, opacity）
- 避免布局动画（frame, position）
- 复杂动画使用CALayer

### 9.3 资源优化
- 图片使用Asset Catalog
- 图标使用SF Symbols（矢量、轻量）
- 懒加载非关键资源

## 10. 设计文件组织

### 10.1 Figma文件结构
```
Cognis Design System
├─ 00 Cover
├─ 01 Colors
├─ 02 Typography
├─ 03 Icons
├─ 04 Components
│   ├─ Buttons
│   ├─ Inputs
│   ├─ Cards
│   └─ Modals
├─ 05 Layouts
│   ├─ Three-Pane Layout
│   ├─ Terminal View
│   └─ AI Inspector
└─ 06 Screens
    ├─ Main Window
    ├─ Settings
    └─ Onboarding
```

### 10.2 设计交付物
- Figma设计文件链接
- 切图资源（PNG 1x, 2x, 3x）
- SF Symbols图标列表
- 设计规范文档（本文档）
- 交互原型演示

## 11. 开发实现注意事项

### 11.1 SwiftUI最佳实践
- 使用`@Observable`宏管理状态
- 合理使用`@State`、`@Binding`、`@Environment`
- 组件粒度要适中，避免过度拆分
- 使用`ViewModifier`复用样式

### 11.2 性能监控
- 使用Instruments监控渲染性能
- 避免主线程阻塞
- 大数据量使用分页加载

### 11.3 深色模式适配
- 使用语义色彩（Semantic Colors）
- 测试浅色和深色模式
- 图标使用支持深色模式的资源
